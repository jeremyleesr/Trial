<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta
  name="viewport"
  content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>
<title>Piano Hero â€“ Visual Build v1.6</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    overflow: hidden;
    touch-action: manipulation;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  #rotateOverlay {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    z-index: 10;
    font-size: 18px;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
  }

  #rotateOverlay.show {
    opacity: 1;
    pointer-events: auto;
  }

  #gameCanvas {
    display: block;
  }

  #startBtn {
    position: absolute;
    top: 12px;
    left: 12px;
    z-index: 5;
    padding: 10px 18px;
    background: #2ecc71;
    border: none;
    border-radius: 18px;
    color: #000;
    font-size: 16px;
    font-weight: 600;
  }
</style>
</head>

<body>

<button id="startBtn">START</button>

<canvas id="gameCanvas"></canvas>

<div id="rotateOverlay">
  <div style="font-size:40px;">ðŸ”„</div>
  <div style="margin-top:12px;">Rotate device to landscape</div>
  <div style="opacity:0.7; margin-top:6px;">Piano Hero is played sideways</div>
</div>

<script>
/* ========= ORIENTATION CHECK ========= */

const overlay = document.getElementById('rotateOverlay');

function checkOrientation() {
  const isLandscape = window.innerWidth > window.innerHeight;
  overlay.classList.toggle('show', !isLandscape);
}

window.addEventListener('resize', checkOrientation);
window.addEventListener('orientationchange', checkOrientation);

/* ========= CANVAS SETUP ========= */

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}

resizeCanvas();
checkOrientation();

/* ========= VISUAL CONSTANTS ========= */

const STAFF_HEIGHT_RATIO = 0.24; // ~ top 24% of screen
const STAFF_LINE_GAP = 10;
const STAFF_LINE_COUNT = 5;
const GRAND_STAFF_GAP = 28;

const NOTE_RADIUS = 7;
const NOTE_SPEED = 1.2;

/* ========= STAFF GEOMETRY ========= */

function getStaffLayout() {
  const staffAreaHeight = canvas.height * STAFF_HEIGHT_RATIO;

  const trebleTop =
    (staffAreaHeight -
      (STAFF_LINE_GAP * (STAFF_LINE_COUNT - 1) * 2 + GRAND_STAFF_GAP)) / 2;

  const bassTop =
    trebleTop +
    STAFF_LINE_GAP * (STAFF_LINE_COUNT - 1) +
    GRAND_STAFF_GAP;

  return { trebleTop, bassTop };
}

/* ========= NOTES ========= */

const notes = [
  { x: canvas.width + 60, staff: 'treble', line: 2 },
  { x: canvas.width + 140, staff: 'treble', line: 3 },
  { x: canvas.width + 220, staff: 'treble', line: 1 },

  { x: canvas.width + 300, staff: 'bass', line: 2 },
  { x: canvas.width + 380, staff: 'bass', line: 3 },
  { x: canvas.width + 460, staff: 'bass', line: 1 }
];

/* ========= DRAWING ========= */

function drawStaff(topY) {
  ctx.strokeStyle = '#000';
  ctx.lineWidth = 1;

  for (let i = 0; i < STAFF_LINE_COUNT; i++) {
    const y = topY + i * STAFF_LINE_GAP;
    ctx.beginPath();
    ctx.moveTo(0, y);
    ctx.lineTo(canvas.width, y);
    ctx.stroke();
  }
}

function drawNote(note, topY) {
  const y =
    topY +
    (STAFF_LINE_COUNT - 1 - note.line) * STAFF_LINE_GAP;

  ctx.beginPath();
  ctx.arc(note.x, y, NOTE_RADIUS, 0, Math.PI * 2);
  ctx.fillStyle = '#000';
  ctx.fill();

  ctx.beginPath();
  ctx.moveTo(note.x + NOTE_RADIUS, y);
  ctx.lineTo(note.x + NOTE_RADIUS, y - 22);
  ctx.strokeStyle = '#000';
  ctx.stroke();
}

/* ========= MAIN LOOP ========= */

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // White background behind staff only
  ctx.fillStyle = '#fff';
  ctx.fillRect(0, 0, canvas.width, canvas.height * STAFF_HEIGHT_RATIO);

  const { trebleTop, bassTop } = getStaffLayout();

  drawStaff(trebleTop);
  drawStaff(bassTop);

  for (const note of notes) {
    note.x -= NOTE_SPEED;

    const staffTop =
      note.staff === 'treble' ? trebleTop : bassTop;

    drawNote(note, staffTop);
  }

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
