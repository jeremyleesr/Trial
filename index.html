<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Piano Hero â€“ Visual v1.4</title>

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #111;
    overflow: hidden;
    touch-action: none;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  #gameCanvas {
    display: block;
    background: #111;
  }

  #rotateOverlay {
    position: fixed;
    inset: 0;
    background: #000;
    color: #fff;
    display: none;
    align-items: center;
    justify-content: center;
    text-align: center;
    z-index: 9999;
    font-size: 22px;
    padding: 20px;
  }
</style>
</head>

<body>

<canvas id="gameCanvas"></canvas>

<div id="rotateOverlay">
  <div>
    ðŸ”„ Rotate device to landscape<br><br>
    Piano Hero is played sideways
  </div>
</div>

<script>
/* =========================
   ORIENTATION LOCK LOGIC
   ========================= */

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const overlay = document.getElementById("rotateOverlay");

function isLandscape() {
  return window.innerWidth > window.innerHeight;
}

function resizeCanvas() {
  if (!isLandscape()) {
    overlay.style.display = "flex";
    return;
  }

  overlay.style.display = "none";

  // Lock canvas to landscape dimensions
  const width = Math.max(window.innerWidth, window.innerHeight);
  const height = Math.min(window.innerWidth, window.innerHeight);

  canvas.width = width;
  canvas.height = height;
}

window.addEventListener("resize", resizeCanvas);
window.addEventListener("orientationchange", resizeCanvas);

resizeCanvas();

/* =========================
   VISUAL STAFF RENDERING
   ========================= */

function drawStaff(yCenter) {
  const lineSpacing = 14;
  const staffWidth = canvas.width * 0.85;
  const startX = canvas.width * 0.075;

  ctx.strokeStyle = "#eee";
  ctx.lineWidth = 2;

  for (let i = -2; i <= 2; i++) {
    const y = yCenter + i * lineSpacing;
    ctx.beginPath();
    ctx.moveTo(startX, y);
    ctx.lineTo(startX + staffWidth, y);
    ctx.stroke();
  }
}

function drawClef(x, y, type) {
  ctx.fillStyle = "#eee";
  ctx.font = "48px serif";
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  if (type === "treble") ctx.fillText("ð„ž", x, y);
  if (type === "bass") ctx.fillText("ð„¢", x, y);
}

function render() {
  if (!isLandscape()) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  const topStaffY = canvas.height * 0.40;
  const bottomStaffY = canvas.height * 0.65;

  drawStaff(topStaffY);
  drawStaff(bottomStaffY);

  drawClef(canvas.width * 0.09, topStaffY, "treble");
  drawClef(canvas.width * 0.09, bottomStaffY, "bass");

  // Debug labels (visual only)
  ctx.fillStyle = "#888";
  ctx.font = "14px sans-serif";
  ctx.textAlign = "left";
  ctx.fillText("Treble Staff", canvas.width * 0.14, topStaffY - 40);
  ctx.fillText("Bass Staff", canvas.width * 0.14, bottomStaffY - 40);

  requestAnimationFrame(render);
}

render();
</script>

</body>
</html>
